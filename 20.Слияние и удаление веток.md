# Объединяем и удаляем ветки

Представьте, что закончили разработку новой функциональности в отдельной ветке и готовы объединить её с главной — добавить свои изменения в основную версию проекта. Этот процесс называется слиянием веток.

В этом уроке разберём, как «мёржить» (от англ. merge — «сливать», «поглощать») ветки, то есть объединять их. А также как удалять ненужные ветки из репозитория.

## Выполнить слияние — git merge <название_ветки>

Откройте проект git-branches из предыдущей темы. Напомним, что сейчас состояние репозитория следующее.

![ ](https://pictures.s3.yandex.net/resources/M3_T3-3_1687851153.png)

Перед тем как начать процесс слияния, нужно перейти в ветку, куда должны добавиться изменения. Обычно это главная ветка. Перейдите в неё и вызовите команду git merge с именем присоединяемой ветки feature/diff в качестве параметра.

```
$ git checkout main # переключились на главную ветку

$ git merge feature/diff # объединили ветки
Updating 079cfbf..f30d441
Fast-forward
 README.md | 2 ++
 1 file changed, 2 insertions(+) 
```
 
Объединение веток прошло успешно! Все коммиты из feature/diff добавлены в главную ветку. В сообщении после слияния содержится следующая информация:
 
* Updating 079cfbf..f30d441 — значит, что коммиты c 079cfbf по f30d441 были объединены.

* Fast-forward — это режим слияния. Fast-forward (англ. «перемотка») значит, что итогом слияния будет линейная история коммитов. Такое происходит, когда истории двух веток находятся на одной прямой — то есть когда одна ветка продолжает историю, начатую другой, как в нашем примере.

* Информация о конкретных изменениях. В нашем примере поменялся файл README.md (1 file changed): в нём теперь две новые строки (2 insertions(+)).

После слияния веток main и feature/diff репозиторий перейдёт в следующее состояние.

![ ](https://pictures.s3.yandex.net/resources/M3_T4_1687851163.png)

Основная ветка и feature/diff теперь указывают на один коммит. Вы можете проверить это с помощью git log --oneline.

```
$ git log --oneline

f30d441 (HEAD -> main, feature/diff) Добавить описание git diff в README
079cfbf Добавить git branch в README.
7ad18bd Добавить файл README 
```

Откройте файл README.md и убедитесь, что теперь он содержит информацию из обеих веток.

## Удалить ветку после объединения — git branch -D <название_ветки>

После того как произошло слияние, ветку-донора можно удалить. Для этого в основной ветке введите команду git branch с флагом -D (от англ. delete — «удалить») и названием ветки.

```
$ git branch # проверяем местоположение
  bugfix/fix-branch
  feature/add-branch-info
  feature/diff
* main

$ git checkout main # если не в основной, переходим в неё

$ git branch -D feature/diff # удаляем поглощаемую ветку
Deleted branch feature/diff (was f30d441). 
```

Ветка feature/diff удалена — об этом говорит сообщение Deleted branch feature/diff.

**?? Если в момент удаления вы будете находиться в той ветке, которую хотите удалить, Git сообщит об ошибке: can not delete branch (англ. «не получается удалить ветку»).**

У команды git branch -D есть более безопасный вариант с флагом -d. Он удалит ветку только если она была полностью объединена с другой — то есть если две ветки стали (или изначально были) частью одной истории. Например, если вы нечаянно создали ветку с неправильным названием, её можно удалить через git branch -d %имя_ветки%.

**?? Удаление локальной ветки через Git не удаляет ветку на GitHub!**

### Поздравляем! Теперь вы понимаете, как работает ветвление в Git. Что важно запомнить:

* Выполнить слияние веток позволяет команда git merge <название_ветки>. В качестве параметра указывают название ветки, которую нужно влить в текущую.

* Удалять ненужные ветки после слияния — хорошая практика. Так в вашем репозитории всегда будет порядок. За удаление веток отвечает команда git branch -D <название_ветки> и её щадящий вариант с флагом -d.
