# Создаём pull request

В процессе командной работы следует внимательно следить за изменениями в файлах. Нельзя просто внести правки в своей ветке и сразу залить её в основную. Сначала ваши коллеги должны убедиться, что предложенные вами изменения логичны и эффективны.

Для этого используют механизм pull request (англ. «запрос на изменения»; буквально: «запрос на подтягивание»). В обиходе его обычно так и называют — «пул-реквест», или ещё короче — ПР или PR. Алгоритм такой:

1. Вы трудитесь над задачей в своей ветке — например, пишете код новой функциональности.

2. Вы заканчиваете работу, а затем создаёте пул-реквест.

3. Ваши коллеги проверяют, что код выглядит аккуратно и лаконично, а программа работает корректно; также оставляют комментарии. Этот процесс называют code review (англ. «рассмотрение кода»), или просто ревью.

4. После финального согласования вы заливаете свою ветку в основную.

## Из чего состоит pull request и чем он может обернуться

У каждого пул-реквеста есть:

* **Название** — краткое описание предлагаемых изменений. Например: Адаптивный заголовок сайта, Замена альбома на галерею и так далее.

* **Описание** — развёрнутое описание изменений. Это поле заполнять необязательно, но желательно.

* **Исходная ветка** — та, в которой вы работали. Например, feature/merge-request.

* **Целевая ветка** — основная ветка проекта, в которую вы хотите внести изменения.

Где заполнять эти параметры, вы увидите далее — в ходе тренировки. Также у каждого пул-реквеста может быть два исхода:

* **merge** (англ. «соединить») — предлагаемые изменения приняты; код вливается в целевую ветку; пул-реквест закрывается.

* **close** (англ. «закрыть») — пул-реквест закрывается без слияния изменений.

*?? [Вот тут](https://github.com/yandex/ym-helpers/pull/14) можно посмотреть, как разработчики обсуждают изменения кода в комментариях к пул-реквесту.*

## Делаем pull request

После того как новая ветка «запушена» в удалённый репозиторий, можно делать пул-реквест. Существует два способа.

### Первый способ

При создании новой ветки в удалённом репозитории Git распечатает сообщение. Оно включает ссылку на создание пул-реквеста.

```
remote: Create a pull request for 'feat/diff' on GitHub by visiting:
remote:      https://github.com/%ВАШ_АККАУНТ%/git-branches/pull/new/feature/merge-request 
```

Останется только скопировать её в адресную строку браузера, заполнить необходимые поля и нажать Create pull request (англ. «создать запрос на изменения»). Многие терминалы также позволяют кликнуть на эту ссылку — напрямую или через комбинацию Cmd / Ctrl + клик.

Однако такая ссылка появляется только один раз и для новых веток, поэтому иногда приходится идти более сложным путём.

### Второй способ

Чтобы создать пул-реквест для любой существующей ветки на GitHub, перейдите на страницу репозитория, а затем выберите вкладку Pull requests в верхней части экрана.

![ ](https://pictures.s3.yandex.net/resources/M3_T5_01_1687793917.png)

Нажмите на зелёную кнопку New pull request (англ. «новый запрос на изменения»).

![ ](https://pictures.s3.yandex.net/resources/M3_T5_02_1687794029.png)

Выберите названия веток: ветка «откуда» (из которой будет происходить пул-реквест) и ветка «куда» (в которую он будет осуществлён). В нашем случае изменения должны попасть из ветки feature/merge-request в ветку main. На направление изменений указывает стрелка.

В окне ниже отобразится несколько коммитов, а также их изменения. Нажмите на кнопку Create pull request.

![ ](https://pictures.s3.yandex.net/resources/M3_T5_03_1687794047.png)

*?? Вы можете создать пул-реквест из любой ветки, которая отличается от main. У многих команд разработки две основные ветки. В ветке dev ведётся вся активная работа, а в ветке main хранится основная рабочая версия. При этом ветка dev время от времени сливается с веткой main.*

Заполните поля с названием и описанием пул-реквеста. Нажмите Create pull request.

![ ](https://pictures.s3.yandex.net/resources/M3_T5_04_1687794083.png)

Готово: пул-реквест создан! Теперь вы или ваши коллеги могут перейти на вкладку Files changed (англ. «изменённые файлы»), чтобы оставить свои комментарии — провести ревью.

По окончании ревью можно посмотреть комментарии и обсудить изменения на вкладке Pull requests. Также вы можете в любой момент добавить дополнительные коммиты в ветку — они автоматически попадут в открытый пул-реквест после пуша.

![ ](https://pictures.s3.yandex.net/resources/M3_T5_05_1687794101.png)

Осталось только нажать на кнопку Merge pull request (англ. «принять запрос на изменения») — это действие объединит ветку с вашими изменениями и ветку main.

![ ](https://pictures.s3.yandex.net/resources/M3_T5_06_1687794117.png)

Ура: теперь ваши изменения стали частью основной ветки!

### Блестяще! Теперь ваша работа не останется незамеченной, и в этом поможет пул-реквест:

* Пул-реквест — это запрос на рассмотрение предлагаемых изменений и часть процесса ревью.

* Запрос на изменения можно инициировать двумя способами: через ссылку, которую Git выводит после создания ветки, или через интерфейс GitHub.

* После создания пул-реквеста ваши коллеги сделают ревью — оценят предложенные вами правки и оставят свои комментарии.

* По результатам ревью ваши правки могут быть приняты в основную ветку проекта или возвращены на доработку.